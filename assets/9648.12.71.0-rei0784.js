(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[9648,4586,1223,1004],{3260:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,".cpjygsrt[data-v-e916a71a]{position:relative;overflow:hidden;background:var(--panel);border:2px solid var(--X12);border-radius:6px}.cpjygsrt[data-v-e916a71a]:hover{border:2px solid var(--X13)}.cpjygsrt.warn[data-v-e916a71a]{border:2px solid #dec44c}.cpjygsrt.error[data-v-e916a71a]{border:2px solid red}.cpjygsrt+.cpjygsrt[data-v-e916a71a]{margin-top:16px}.cpjygsrt>header>.title[data-v-e916a71a]{z-index:1;margin:0;padding:0 16px;line-height:42px;font-size:.9em;font-weight:700;box-shadow:0 1px rgba(0,0,0,.07)}.cpjygsrt>header>.title>[data-icon][data-v-e916a71a]{margin-right:6px}.cpjygsrt>header>.title[data-v-e916a71a]:empty{display:none}.cpjygsrt>header>.buttons[data-v-e916a71a]{position:absolute;z-index:2;top:0;right:0}.cpjygsrt>header>.buttons>button[data-v-e916a71a]{padding:0;width:42px;font-size:.9em;line-height:42px}.cpjygsrt>header>.buttons .drag-handle[data-v-e916a71a]{cursor:move}.cpjygsrt>.warn[data-v-e916a71a]{color:#b19e49;margin:0;padding:16px 16px 0;font-size:14px}.cpjygsrt>.error[data-v-e916a71a]{color:red;margin:0;padding:16px 16px 0;font-size:14px}.cpjygsrt>.body[data-v-e916a71a] .eiipwacr:not(.inline):first-child,.cpjygsrt>.body[data-v-e916a71a] .juejbjww:not(.inline):first-child{margin-top:28px}.cpjygsrt>.body[data-v-e916a71a] .eiipwacr:not(.inline):last-child,.cpjygsrt>.body[data-v-e916a71a] .juejbjww:not(.inline):last-child{margin-bottom:20px}",""]),e.exports=o},57027:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,".turmquns[data-v-55d668e8]{opacity:.7}.pbglfege[data-v-55d668e8]{opacity:.5;padding:16px;text-align:center;cursor:pointer;color:var(--fg)}.tbwccoaw>input[data-v-55d668e8],.tbwccoaw>textarea[data-v-55d668e8]{display:block;-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;max-width:100%;min-width:100%;border:none;box-shadow:none;padding:16px;font-size:16px;background:transparent;color:var(--fg);box-sizing:border-box}.tbwccoaw>textarea[data-v-55d668e8]{min-height:100px}.hpdwcrvs[data-v-55d668e8]{padding:16px}.hpdwcrvs>select[data-v-55d668e8]{display:block;padding:4px;font-size:16px;width:100%}",""]),e.exports=o},46700:(e,t,a)=>{var o={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-SG":85383,"./en-SG.js":85383,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-nz":76319,"./en-nz.js":76319,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":2088,"./es-do.js":2088,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-tw":74152,"./zh-tw.js":74152};function l(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=n,e.exports=l,l.id=46700},36633:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var o=a(32443);function l(e){return null==e.type||!!o.fl[e.type]}},32443:(e,t,a)=>{"use strict";a.d(t,{fl:()=>s,uA:()=>i,Mo:()=>c,qG:()=>u,wM:()=>p});var o=a(88572),l=a(51436),n=a(60662),r=function(e,t,a,o){var l,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,a,o);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(r=(n<3?l(r):n>3?l(t,a,r):l(t,a))||r);return n>3&&r&&Object.defineProperty(t,a,r),r};const s={text:{out:"string",category:"value",icon:l.Elr},multiLineText:{out:"string",category:"value",icon:l.elf},textList:{out:"stringArray",category:"value",icon:l.Zrf},number:{out:"number",category:"value",icon:l.g2k},ref:{out:null,category:"value",icon:l.een},aiScriptVar:{out:null,category:"value",icon:l.een},fn:{out:"function",category:"value",icon:l.by$}},i=[...Object.entries(s).map((([e,t])=>({type:e,out:t.out,category:t.category,icon:t.icon}))),...Object.entries(n.iN).map((([e,t])=>({type:e,out:t.out,category:t.category,icon:t.icon})))],c={AI:"string",URL:"string",VERSION:"string",LOGIN:"boolean",NAME:"string",USERNAME:"string",USERID:"string",NOTES_COUNT:"number",FOLLOWERS_COUNT:"number",FOLLOWING_COUNT:"number",IS_CAT:"boolean",IS_LADY:"boolean",SEED:null,YMD:"string",AISCRIPT_DISABLED:"boolean",NULL:null};class u{constructor(e,t){this.layerdStates=e,this.name=t||"anonymous"}createChildScope(e,t){const a=[e,...this.layerdStates];return new u(a,t)}getState(e){for(const t of this.layerdStates){const a=t[e];if(void 0!==a)return a}throw new p(`No such variable '${e}' in scope '${this.name}'`,{scope:this.layerdStates})}}r([o.default],u.prototype,"createChildScope",null),r([o.default],u.prototype,"getState",null);class p extends Error{constructor(e,t){super(e),this.info=t,Error.captureStackTrace&&Error.captureStackTrace(this,p)}}},60662:(e,t,a)=>{"use strict";a.d(t,{FG:()=>u,iN:()=>p,kI:()=>d});var o=a(17621),l=a(17757),n=a.n(l),r=a(27328),s=a(36377),i=a(51436),c=a(56024);function u(e){return{"MkPages:updated":r.values.FN_NATIVE((([t])=>{e.pageVarUpdatedCallback=t})),"MkPages:get_canvas":r.values.FN_NATIVE((([t])=>{r.utils.assertString(t);const a=e.canvases[t.value].getContext("2d");return r.values.OBJ(new Map([["clear_rect",r.values.FN_NATIVE((([e,t,o,l])=>{a.clearRect(e.value,t.value,o.value,l.value)}))],["fill_rect",r.values.FN_NATIVE((([e,t,o,l])=>{a.fillRect(e.value,t.value,o.value,l.value)}))],["stroke_rect",r.values.FN_NATIVE((([e,t,o,l])=>{a.strokeRect(e.value,t.value,o.value,l.value)}))],["fill_text",r.values.FN_NATIVE((([e,t,o,l])=>{a.fillText(e.value,t.value,o.value,l?l.value:void 0)}))],["stroke_text",r.values.FN_NATIVE((([e,t,o,l])=>{a.strokeText(e.value,t.value,o.value,l?l.value:void 0)}))],["set_line_width",r.values.FN_NATIVE((([e])=>{a.lineWidth=e.value}))],["set_font",r.values.FN_NATIVE((([e])=>{a.font=e.value}))],["set_fill_style",r.values.FN_NATIVE((([e])=>{a.fillStyle=e.value}))],["set_stroke_style",r.values.FN_NATIVE((([e])=>{a.strokeStyle=e.value}))],["begin_path",r.values.FN_NATIVE((()=>{a.beginPath()}))],["close_path",r.values.FN_NATIVE((()=>{a.closePath()}))],["move_to",r.values.FN_NATIVE((([e,t])=>{a.moveTo(e.value,t.value)}))],["line_to",r.values.FN_NATIVE((([e,t])=>{a.lineTo(e.value,t.value)}))],["arc",r.values.FN_NATIVE((([e,t,o,l,n])=>{a.arc(e.value,t.value,o.value,l.value,n.value)}))],["rect",r.values.FN_NATIVE((([e,t,o,l])=>{a.rect(e.value,t.value,o.value,l.value)}))],["fill",r.values.FN_NATIVE((()=>{a.fill()}))],["stroke",r.values.FN_NATIVE((()=>{a.stroke()}))]]))})),"MkPages:chart":r.values.FN_NATIVE((([t,a])=>{r.utils.assertString(t),r.utils.assertObject(a);const l=e.canvases[t.value],s=getComputedStyle(document.documentElement).getPropertyValue("--accent");n().defaults.global.defaultFontColor="#555";new(n())(l,{type:a.value.get("type").value,data:{labels:a.value.get("labels").value.map((e=>e.value)),datasets:a.value.get("datasets").value.map((e=>({label:e.value.has("label")?e.value.get("label").value:"",data:e.value.get("data").value.map((e=>e.value)),pointRadius:0,lineTension:0,borderWidth:2,borderColor:e.value.has("color")?e.value.get("color"):s,backgroundColor:o(e.value.has("color")?e.value.get("color"):s).setAlpha(.1).toRgbString()})))},options:Object.assign({responsive:!1,devicePixelRatio:1.5,title:{display:a.value.has("title"),text:a.value.has("title")?a.value.get("title").value:"",fontSize:14},layout:{padding:{left:32,right:32,top:a.value.has("title")?16:32,bottom:16}},legend:{display:0!==a.value.get("datasets").value.filter((e=>e.value.has("label")&&e.value.get("label").value)).length,position:"bottom",labels:{boxWidth:16}},tooltips:{enabled:!1},chartArea:{backgroundColor:"#fff"}},"radar"===a.value.get("type").value?{scale:{ticks:{display:!!a.value.has("show_tick_label")&&a.value.get("show_tick_label").value,min:a.value.has("min")?a.value.get("min").value:void 0,max:a.value.has("max")?a.value.get("max").value:void 0,maxTicksLimit:8},pointLabels:{fontSize:12}}}:{scales:{yAxes:[{ticks:{display:!a.value.has("show_tick_label")||a.value.get("show_tick_label").value,min:a.value.has("min")?a.value.get("min").value:void 0,max:a.value.has("max")?a.value.get("max").value:void 0}}]}})})}))}}n().pluginService.register({beforeDraw:(e,t)=>{if(e.config.options.chartArea&&e.config.options.chartArea.backgroundColor){const t=e.chart.ctx;t.save(),t.fillStyle=e.config.options.chartArea.backgroundColor,t.fillRect(0,0,e.chart.width,e.chart.height),t.restore()}}});const p={if:{in:["boolean",0,0],out:0,category:"flow",icon:i.EfQ},for:{in:["number","function"],out:null,category:"flow",icon:i.TZC},not:{in:["boolean"],out:"boolean",category:"logical",icon:c.Rr},or:{in:["boolean","boolean"],out:"boolean",category:"logical",icon:c.Rr},and:{in:["boolean","boolean"],out:"boolean",category:"logical",icon:c.Rr},add:{in:["number","number"],out:"number",category:"operation",icon:i.r8p},subtract:{in:["number","number"],out:"number",category:"operation",icon:i.Kl4},multiply:{in:["number","number"],out:"number",category:"operation",icon:i.NBC},divide:{in:["number","number"],out:"number",category:"operation",icon:i.pGc},mod:{in:["number","number"],out:"number",category:"operation",icon:i.pGc},round:{in:["number"],out:"number",category:"operation",icon:i.lTt},eq:{in:[0,0],out:"boolean",category:"comparison",icon:i.Lvu},notEq:{in:[0,0],out:"boolean",category:"comparison",icon:i.u34},gt:{in:["number","number"],out:"boolean",category:"comparison",icon:i.WqQ},lt:{in:["number","number"],out:"boolean",category:"comparison",icon:i.GQf},gtEq:{in:["number","number"],out:"boolean",category:"comparison",icon:i.GJP},ltEq:{in:["number","number"],out:"boolean",category:"comparison",icon:i.ERW},strLen:{in:["string"],out:"number",category:"text",icon:i.Elr},strPick:{in:["string","number"],out:"string",category:"text",icon:i.Elr},strReplace:{in:["string","string","string"],out:"string",category:"text",icon:i.Elr},strReverse:{in:["string"],out:"string",category:"text",icon:i.Elr},join:{in:["stringArray","string"],out:"string",category:"text",icon:i.Elr},stringToNumber:{in:["string"],out:"number",category:"convert",icon:i.Ssp},numberToString:{in:["number"],out:"string",category:"convert",icon:i.Ssp},splitStrByLine:{in:["string"],out:"stringArray",category:"convert",icon:i.Ssp},pick:{in:[null,"number"],out:null,category:"list",icon:i.s$_},listLen:{in:[null],out:"number",category:"list",icon:i.s$_},rannum:{in:["number","number"],out:"number",category:"random",icon:i.RJo},dailyRannum:{in:["number","number"],out:"number",category:"random",icon:i.RJo},seedRannum:{in:[null,"number","number"],out:"number",category:"random",icon:i.RJo},random:{in:["number"],out:"boolean",category:"random",icon:i.RJo},dailyRandom:{in:["number"],out:"boolean",category:"random",icon:i.RJo},seedRandom:{in:[null,"number"],out:"boolean",category:"random",icon:i.RJo},randomPick:{in:[0],out:0,category:"random",icon:i.RJo},dailyRandomPick:{in:[0],out:0,category:"random",icon:i.RJo},seedRandomPick:{in:[null,0],out:0,category:"random",icon:i.RJo},DRPWPM:{in:["stringArray"],out:"string",category:"random",icon:i.RJo}};function d(e,t,a,o){const l=new Date,n=`${o?o.id:""} ${l.getFullYear()}/${l.getMonth()+1}/${l.getDate()}`;return{not:e=>!e,or:(e,t)=>e||t,and:(e,t)=>e&&t,eq:(e,t)=>e===t,notEq:(e,t)=>e!==t,gt:(e,t)=>e>t,lt:(e,t)=>e<t,gtEq:(e,t)=>e>=t,ltEq:(e,t)=>e<=t,if:(e,t,a)=>e?t:a,for:(e,t)=>{const a=[];for(let o=0;o<e;o++)a.push(t.exec({[t.slots[0]]:o+1}));return a},add:(e,t)=>e+t,subtract:(e,t)=>e-t,multiply:(e,t)=>e*t,divide:(e,t)=>e/t,mod:(e,t)=>e%t,round:e=>Math.round(e),strLen:e=>e.length,strPick:(e,t)=>e[t-1],strReplace:(e,t,a)=>e.split(t).join(a),strReverse:e=>e.split("").reverse().join(""),join:(e,t)=>e.join(t||""),stringToNumber:e=>parseInt(e),numberToString:e=>e.toString(),splitStrByLine:e=>e.split("\n"),pick:(e,t)=>e[t-1],listLen:e=>e.length,random:t=>Math.floor(100*s(`${a}:${e.id}`)())<t,rannum:(t,o)=>t+Math.floor(s(`${a}:${e.id}`)()*(o-t+1)),randomPick:t=>t[Math.floor(s(`${a}:${e.id}`)()*t.length)],dailyRandom:t=>Math.floor(100*s(`${n}:${e.id}`)())<t,dailyRannum:(t,a)=>t+Math.floor(s(`${n}:${e.id}`)()*(a-t+1)),dailyRandomPick:t=>t[Math.floor(s(`${n}:${e.id}`)()*t.length)],seedRandom:(e,t)=>Math.floor(100*s(e)())<t,seedRannum:(e,t,a)=>t+Math.floor(s(e)()*(a-t+1)),seedRandomPick:(e,t)=>t[Math.floor(s(e)()*t.length)],DRPWPM:t=>{const a=[];let o=0;for(const e of t){const t=e.split(" "),l=parseInt(t.pop(),10),n=t.join(" ");o+=l,a.push({factor:l,text:n})}const l=s(`${n}:${e.id}`)()*o;let r=0;for(const e of a){if(l>=r&&l<=r+e.factor)return e.text;r+=e.factor}return a[0].text}}}},44586:(e,t,a)=>{"use strict";var o;a.d(t,{Z:()=>p});var l=new Uint8Array(16);function n(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(l)}const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=function(e){return"string"==typeof e&&r.test(e)};for(var i=[],c=0;c<256;++c)i.push((c+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!s(a))throw TypeError("Stringified UUID is invalid");return a};const p=function(e,t,a){var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){a=a||0;for(var l=0;l<16;++l)t[a+l]=o[l];return t}return u(o)}},1223:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var o=a(55393);const l=(0,o.withScopeId)("data-v-e916a71a");(0,o.pushScopeId)("data-v-e916a71a");const n={class:"title"},r={class:"buttons"},s={key:1,class:"drag-handle _button"},i={class:"body"};(0,o.popScopeId)();const c=l(((e,t,a,l,c,u)=>{const p=(0,o.resolveComponent)("Fa");return(0,o.openBlock)(),(0,o.createBlock)("div",{class:["cpjygsrt",{error:null!=e.error,warn:null!=e.warn}]},[(0,o.createVNode)("header",null,[(0,o.createVNode)("div",n,[(0,o.renderSlot)(e.$slots,"header")]),(0,o.createVNode)("div",r,[(0,o.renderSlot)(e.$slots,"func"),e.removable?((0,o.openBlock)(),(0,o.createBlock)("button",{key:0,onClick:t[1]||(t[1]=t=>e.remove()),class:"_button"},[(0,o.createVNode)(p,{icon:e.faTrashAlt},null,8,["icon"])])):(0,o.createCommentVNode)("",!0),e.draggable?((0,o.openBlock)(),(0,o.createBlock)("button",s,[(0,o.createVNode)(p,{icon:e.faBars},null,8,["icon"])])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)("button",{onClick:t[2]||(t[2]=t=>e.toggleContent(!e.showBody)),class:"_button"},[e.showBody?((0,o.openBlock)(),(0,o.createBlock)(p,{key:0,icon:e.faAngleUp},null,8,["icon"])):((0,o.openBlock)(),(0,o.createBlock)(p,{key:1,icon:e.faAngleDown},null,8,["icon"]))])])]),null!=e.error?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)("p",{key:0,class:"error"},(0,o.toDisplayString)(e.$t("_pages.script.typeError",{slot:e.error.arg+1,expect:e.$t("script.types."+e.error.expect),actual:e.$t("script.types."+e.error.actual)})),513)),[[o.vShow,e.showBody]]):(0,o.createCommentVNode)("",!0),null!=e.warn?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)("p",{key:1,class:"warn"},(0,o.toDisplayString)(e.$t("_pages.script.thereIsEmptySlot",{slot:e.warn.slot+1})),513)),[[o.vShow,e.showBody]]):(0,o.createCommentVNode)("",!0),(0,o.withDirectives)((0,o.createVNode)("div",i,[(0,o.renderSlot)(e.$slots,"default")],512),[[o.vShow,e.showBody]])],2)}));var u=a(51436),p=a(56024);const d=(0,o.defineComponent)({props:{expanded:{type:Boolean,default:!0},removable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},error:{required:!1,default:null},warn:{required:!1,default:null}},emits:["toggle","remove"],data(){return{showBody:this.expanded,faTrashAlt:p.I7,faBars:u.xiG,faAngleUp:u.onQ,faAngleDown:u.gc2}},methods:{toggleContent(e){this.showBody=e,this.$emit("toggle",e)},remove(){this.$emit("remove")}}});a(58399);d.render=c,d.__scopeId="data-v-e916a71a";const v=d},35440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var o=a(55393);const l=(0,o.withScopeId)("data-v-55d668e8");(0,o.pushScopeId)("data-v-55d668e8");const n=(0,o.createTextVNode)(),r={key:0,class:"turmquns"},s={key:1,class:"tbwccoaw"},i={key:2,class:"tbwccoaw"},c={key:3,class:"tbwccoaw"},u={key:4,class:"tbwccoaw"},p={key:5,class:"hpdwcrvs"},d={key:6,class:"tbwccoaw"},v={key:7,class:"",style:{padding:"0 16px 16px 16px"}},g={key:8,class:"",style:{padding:"16px"}},m={key:9,class:"",style:{padding:"16px"}};(0,o.popScopeId)();const y=l(((e,t,a,y,h,b)=>{const f=(0,o.resolveComponent)("Fa"),k=(0,o.resolveComponent)("MkTextarea"),j=(0,o.resolveComponent)("XV"),x=(0,o.resolveComponent)("XContainer");return(0,o.openBlock)(),(0,o.createBlock)(x,{removable:e.removable,onRemove:t[11]||(t[11]=()=>e.$emit("remove")),error:e.error,warn:e.warn,draggable:e.draggable},{header:l((()=>[e.icon?((0,o.openBlock)(),(0,o.createBlock)(f,{key:0,icon:e.icon},null,8,["icon"])):(0,o.createCommentVNode)("",!0),n,e.title?((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)((0,o.toDisplayString)(e.title)+" ",1),e.typeText?((0,o.openBlock)(),(0,o.createBlock)("span",r,"("+(0,o.toDisplayString)(e.typeText)+")",1)):(0,o.createCommentVNode)("",!0)],64)):e.typeText?((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,{key:2},[(0,o.createTextVNode)((0,o.toDisplayString)(e.typeText),1)],64)):(0,o.createCommentVNode)("",!0)])),func:l((()=>[(0,o.createVNode)("button",{onClick:t[1]||(t[1]=t=>e.changeType()),class:"_button"},[(0,o.createVNode)(f,{icon:e.faPencilAlt},null,8,["icon"])])])),default:l((()=>[null===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",{key:0,class:"pbglfege",onClick:t[2]||(t[2]=t=>e.changeType())},(0,o.toDisplayString)(e.$ts._pages.script.emptySlot),1)):"text"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",s,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.value.value=t)},null,512),[[o.vModelText,e.value.value]])])):"multiLineText"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",i,[(0,o.withDirectives)((0,o.createVNode)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.value.value=t)},null,512),[[o.vModelText,e.value.value]])])):"textList"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",c,[(0,o.withDirectives)((0,o.createVNode)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.value.value=t),placeholder:e.$ts._pages.script.blocks._textList.info},null,8,["placeholder"]),[[o.vModelText,e.value.value]])])):"number"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",u,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.value.value=t),type:"number"},null,512),[[o.vModelText,e.value.value]])])):"ref"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",p,[(0,o.withDirectives)((0,o.createVNode)("select",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.value.value=t)},[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.hpml.getVarsByType(e.getExpectedType?e.getExpectedType():null).filter((t=>t.name!==e.name)),(e=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:e.name},(0,o.toDisplayString)(e.name),9,["value"])))),256)),(0,o.createVNode)("optgroup",{label:e.$ts._pages.script.argVariables},[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.fnSlots,(e=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:e.name},(0,o.toDisplayString)(e.name),9,["value"])))),256))],8,["label"]),(0,o.createVNode)("optgroup",{label:e.$ts._pages.script.pageVariables},[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.hpml.getPageVarsByType(e.getExpectedType?e.getExpectedType():null),(e=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:e},(0,o.toDisplayString)(e),9,["value"])))),256))],8,["label"]),(0,o.createVNode)("optgroup",{label:e.$ts._pages.script.enviromentVariables},[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.hpml.getEnvVarsByType(e.getExpectedType?e.getExpectedType():null),(e=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:e},(0,o.toDisplayString)(e),9,["value"])))),256))],8,["label"])],512),[[o.vModelSelect,e.value.value]])])):"aiScriptVar"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",d,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.value.value=t)},null,512),[[o.vModelText,e.value.value]])])):"fn"===e.value.type?((0,o.openBlock)(),(0,o.createBlock)("section",v,[(0,o.createVNode)(k,{value:e.slots,"onUpdate:value":t[9]||(t[9]=t=>e.slots=t)},{desc:l((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("_pages.script.blocks._fn.slots-info")),1)])),default:l((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts._pages.script.blocks._fn.slots),1)])),_:1},8,["value"]),e.value.value.expression?((0,o.openBlock)(),(0,o.createBlock)(j,{key:0,value:e.value.value.expression,"onUpdate:value":t[10]||(t[10]=t=>e.value.value.expression=t),title:e.$t("_pages.script.blocks._fn.arg1"),"get-expected-type":()=>null,hpml:e.hpml,"fn-slots":e.value.value.slots,name:e.name},null,8,["value","title","get-expected-type","hpml","fn-slots","name"])):(0,o.createCommentVNode)("",!0)])):e.value.type.startsWith("fn:")?((0,o.openBlock)(),(0,o.createBlock)("section",g,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.value.args,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)(j,{value:e.value.args[a],"onUpdate:value":t=>e.value.args[a]=t,title:e.hpml.getVarByName(e.value.type.split(":")[1]).value.slots[a].name,"get-expected-type":()=>null,hpml:e.hpml,name:e.name,key:a},null,8,["value","onUpdate:value","title","get-expected-type","hpml","name"])))),128))])):((0,o.openBlock)(),(0,o.createBlock)("section",m,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.value.args,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)(j,{value:e.value.args[a],"onUpdate:value":t=>e.value.args[a]=t,title:e.$t(`_pages.script.blocks._${e.value.type}.arg${a+1}`),"get-expected-type":()=>e._getExpectedType(a),hpml:e.hpml,name:e.name,"fn-slots":e.fnSlots,key:a},null,8,["value","onUpdate:value","title","get-expected-type","hpml","name","fn-slots"])))),128))]))])),_:1},8,["removable","error","warn","draggable"])}));var h=a(51436),b=a(44586),f=a(1223),k=a(19055),j=a(32443),x=a(10192),w=a(36633),B=a(60662);const N=(0,o.defineComponent)({components:{XContainer:f.default,MkTextarea:k.Z,XV:(0,o.defineAsyncComponent)((()=>Promise.resolve().then(a.bind(a,35440))))},inject:["getScriptBlockList"],props:{getExpectedType:{required:!1,default:null},value:{required:!0},title:{required:!1},removable:{required:!1,default:!1},hpml:{required:!0},name:{required:!0},fnSlots:{required:!1},draggable:{required:!1,default:!1}},data:()=>({error:null,warn:null,slots:"",faPencilAlt:h.UJf}),computed:{icon(){return null===this.value.type?null:this.value.type.startsWith("fn:")?h.oso:j.uA.find((e=>e.type===this.value.type)).icon},typeText(){return null===this.value.type?null:this.value.type.startsWith("fn:")?this.value.type.split(":")[1]:this.$t("_pages.script.blocks."+this.value.type)}},watch:{slots:{handler(){this.value.value.slots=this.slots.split("\n").map((e=>({name:e,type:null})))},deep:!0}},created(){null==this.value.value&&(this.value.value=null),this.value.value&&this.value.value.slots&&(this.slots=this.value.value.slots.map((e=>e.name)).join("\n")),this.$watch((()=>this.value.type),(e=>{if(this.warn=null,"fn"===this.value.type){const e=(0,b.Z)();return void(this.value.value={slots:[],expression:{id:e,type:null}})}if(this.value.type&&this.value.type.startsWith("fn:")){const e=this.value.type.split(":")[1],t=this.hpml.getVarByName(e),a=[];for(let e=0;e<t.value.slots.length;e++){const e=(0,b.Z)();a.push({id:e,type:null})}return void(this.value.args=a)}if((0,w.$)(this.value))return;const t=[];for(let e=0;e<B.iN[this.value.type].in.length;e++){const e=(0,b.Z)();t.push({id:e,type:null})}this.value.args=t;for(let e=0;e<B.iN[this.value.type].in.length;e++){const t=B.iN[this.value.type].in[e];"number"!=typeof t&&("number"===t&&(this.value.args[e].type="number"),"string"===t&&(this.value.args[e].type="text"))}})),this.$watch((()=>this.value.args),(e=>{if(null==e)return void(this.warn=null);const t=e.findIndex((e=>null===e.type));-1!==t&&t<e.length?this.warn={slot:t}:this.warn=null}),{deep:!0}),this.$watch((()=>this.hpml.variables),(()=>{null!=this.type&&this.value&&(this.error=this.hpml.typeCheck(this.value))}),{deep:!0})},methods:{async changeType(){const{canceled:e,result:t}=await x.WZ({type:null,title:this.$ts._pages.selectType,select:{groupedItems:this.getScriptBlockList(this.getExpectedType?this.getExpectedType():null)},showCancelButton:!0});e||(this.value.type=t)},_getExpectedType(e){return this.hpml.getExpectedType(this.value,e)}}});a(43597);N.render=y,N.__scopeId="data-v-55d668e8";const _=N},58399:(e,t,a)=>{var o=a(3260);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("b22b7fbc",o,!0,{})},43597:(e,t,a)=>{var o=a(57027);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("6c7f32d4",o,!0,{})},63906:()=>{}}]);