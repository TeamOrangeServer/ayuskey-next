(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[8635,1010],{78721:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,".player[data-v-da06e69c]{position:relative;width:100%}.player>button[data-v-da06e69c]{position:absolute;top:-1.5em;right:0;font-size:1em;width:1.5em;height:1.5em;padding:0;margin:0;color:var(--fg);background:hsla(0,0%,50.2%,.2);opacity:.7}.player>button[data-v-da06e69c]:hover{opacity:.9}.player>iframe[data-v-da06e69c]{height:100%;left:0;position:absolute;top:0;width:100%}.mk-url-preview.max-width_400px>a[data-v-da06e69c]{font-size:12px}.mk-url-preview.max-width_400px>a>.thumbnail[data-v-da06e69c]{height:80px}.mk-url-preview.max-width_400px>a>article[data-v-da06e69c]{padding:12px}.mk-url-preview.max-width_350px>a[data-v-da06e69c]{font-size:10px}.mk-url-preview.max-width_350px>a>.thumbnail[data-v-da06e69c]{height:70px}.mk-url-preview.max-width_350px>a>article[data-v-da06e69c]{padding:8px}.mk-url-preview.max-width_350px>a>article>header[data-v-da06e69c]{margin-bottom:4px}.mk-url-preview.max-width_350px>a>article>footer[data-v-da06e69c]{margin-top:4px}.mk-url-preview.max-width_350px>a>article>footer>img[data-v-da06e69c]{width:12px;height:12px}.mk-url-preview.max-width_350px>a.compact>.thumbnail[data-v-da06e69c]{position:absolute;width:56px;height:100%}.mk-url-preview.max-width_350px>a.compact>article[data-v-da06e69c]{left:56px;width:calc(100% - 56px);padding:4px}.mk-url-preview.max-width_350px>a.compact>article>header[data-v-da06e69c]{margin-bottom:2px}.mk-url-preview.max-width_350px>a.compact>article>footer[data-v-da06e69c]{margin-top:2px}.mk-url-preview>a[data-v-da06e69c]{position:relative;display:block;font-size:14px;box-shadow:0 0 0 1px var(--divider);border-radius:8px;overflow:hidden}.mk-url-preview>a[data-v-da06e69c]:hover{text-decoration:none;border-color:rgba(0,0,0,.2)}.mk-url-preview>a:hover>article>header>h1[data-v-da06e69c]{text-decoration:underline}.mk-url-preview>a>.thumbnail[data-v-da06e69c]{position:absolute;width:100px;height:100%;background-position:50%;background-size:cover;display:flex;justify-content:center;align-items:center}.mk-url-preview>a>.thumbnail>button[data-v-da06e69c]{font-size:3.5em;opacity:.7}.mk-url-preview>a>.thumbnail>button[data-v-da06e69c]:hover{font-size:4em;opacity:.9}.mk-url-preview>a>.thumbnail+article[data-v-da06e69c]{left:100px;width:calc(100% - 100px)}.mk-url-preview>a>article[data-v-da06e69c]{position:relative;box-sizing:border-box;padding:16px}.mk-url-preview>a>article>header[data-v-da06e69c]{margin-bottom:8px}.mk-url-preview>a>article>header>h1[data-v-da06e69c]{margin:0;font-size:1em}.mk-url-preview>a>article>p[data-v-da06e69c]{margin:0;font-size:.8em}.mk-url-preview>a>article>footer[data-v-da06e69c]{margin-top:8px;height:16px}.mk-url-preview>a>article>footer>img[data-v-da06e69c]{display:inline-block;width:16px;height:16px;margin-right:4px;vertical-align:top}.mk-url-preview>a>article>footer>p[data-v-da06e69c]{display:inline-block;margin:0;color:var(--urlPreviewInfo);font-size:.8em;line-height:16px;vertical-align:top}.mk-url-preview>a.compact>article>header h1[data-v-da06e69c],.mk-url-preview>a.compact>article footer[data-v-da06e69c],.mk-url-preview>a.compact>article p[data-v-da06e69c]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""]),e.exports=o},22290:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,'.thvuemwp[data-v-6b6af731]{position:relative;background-color:transparent;display:flex}.thvuemwp>.avatar[data-v-6b6af731]{display:block;width:54px;height:54px;transition:all .1s ease}.thvuemwp>.content[data-v-6b6af731]{min-width:0}.thvuemwp>.content>.balloon[data-v-6b6af731]{position:relative;display:inline-flex;align-items:center;padding:0;min-height:38px;border-radius:16px;max-width:100%}.thvuemwp>.content>.balloon[data-v-6b6af731]:before{content:"";pointer-events:none;display:block;position:absolute;top:12px}.thvuemwp>.content>.balloon+*[data-v-6b6af731]{clear:both}.thvuemwp>.content>.balloon:hover>.delete-button[data-v-6b6af731]{display:block}.thvuemwp>.content>.balloon>.delete-button[data-v-6b6af731]{display:none;position:absolute;z-index:1;top:-4px;right:-4px;margin:0;padding:0;cursor:pointer;outline:none;border:none;border-radius:0;box-shadow:none;background:transparent}.thvuemwp>.content>.balloon>.delete-button>img[data-v-6b6af731]{vertical-align:bottom;width:16px;height:16px;cursor:pointer}.thvuemwp>.content>.balloon>.content[data-v-6b6af731]{max-width:100%}.thvuemwp>.content>.balloon>.content>.is-deleted[data-v-6b6af731]{display:block;margin:0;padding:0;overflow:hidden;overflow-wrap:break-word;font-size:1em;color:rgba(0,0,0,.5)}.thvuemwp>.content>.balloon>.content>.text[data-v-6b6af731]{display:block;margin:0;padding:12px 18px;overflow:hidden;overflow-wrap:break-word;word-break:break-word;font-size:1em;color:rgba(0,0,0,.8)}.thvuemwp>.content>.balloon>.content>.text+.file>a[data-v-6b6af731]{border-radius:0 0 16px 16px}.thvuemwp>.content>.balloon>.content>.file>a[data-v-6b6af731]{display:block;max-width:100%;border-radius:16px;overflow:hidden;text-decoration:none}.thvuemwp>.content>.balloon>.content>.file>a[data-v-6b6af731]:hover{text-decoration:none}.thvuemwp>.content>.balloon>.content>.file>a:hover>p[data-v-6b6af731]{background:#ccc}.thvuemwp>.content>.balloon>.content>.file>a>*[data-v-6b6af731]{display:block;margin:0;width:100%;max-height:512px;object-fit:contain;box-sizing:border-box}.thvuemwp>.content>.balloon>.content>.file>a>p[data-v-6b6af731]{padding:30px;text-align:center;color:#555;background:#ddd}.thvuemwp>.content>footer[data-v-6b6af731]{display:block;margin:2px 0 0;font-size:.65em}.thvuemwp>.content>footer>.read[data-v-6b6af731]{margin:0 8px}.thvuemwp>.content>footer>[data-icon][data-v-6b6af731]{margin-left:4px}.thvuemwp[data-v-6b6af731]:not(.isMe){padding-left:var(--margin)}.thvuemwp:not(.isMe)>.content[data-v-6b6af731]{padding-left:16px;padding-right:32px}.thvuemwp:not(.isMe)>.content>.balloon[data-v-6b6af731]{background:var(--messageBg)}.thvuemwp:not(.isMe)>.content>.balloon.noText[data-v-6b6af731]{background:transparent}.thvuemwp:not(.isMe)>.content>.balloon[data-v-6b6af731]:not(.noText):before{left:-14px;border:8px solid transparent;border-right:8px solid var(--messageBg)}.thvuemwp:not(.isMe)>.content>.balloon>.content>.text[data-v-6b6af731]{color:var(--fg)}.thvuemwp:not(.isMe)>.content>footer[data-v-6b6af731]{text-align:left}.thvuemwp.isMe[data-v-6b6af731]{flex-direction:row-reverse;padding-right:var(--margin)}.thvuemwp.isMe>.content[data-v-6b6af731]{padding-right:16px;padding-left:32px;text-align:right}.thvuemwp.isMe>.content>.balloon[data-v-6b6af731]{background:var(--accent);text-align:left}.thvuemwp.isMe>.content>.balloon.noText[data-v-6b6af731]{background:transparent}.thvuemwp.isMe>.content>.balloon[data-v-6b6af731]:not(.noText):before{right:-14px;left:auto;border:8px solid transparent;border-left:8px solid var(--accent)}.thvuemwp.isMe>.content>.balloon>.content>p.is-deleted[data-v-6b6af731]{color:hsla(0,0%,100%,.5)}.thvuemwp.isMe>.content>.balloon>.content>.text[data-v-6b6af731],.thvuemwp.isMe>.content>.balloon>.content>.text[data-v-6b6af731] *{color:#fff!important}.thvuemwp.isMe>.content>footer[data-v-6b6af731]{text-align:right}.thvuemwp.isMe>.content>footer>.read[data-v-6b6af731]{user-select:none}.thvuemwp.max-width_400px>.avatar[data-v-6b6af731]{width:48px;height:48px}.thvuemwp.max-width_400px>.content>.balloon>.content>.text[data-v-6b6af731]{font-size:.9em}.thvuemwp.max-width_500px>.content>.balloon>.content>.text[data-v-6b6af731]{padding:8px 16px}',""]),e.exports=o},71010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var o=a(55393);const n=(0,o.withScopeId)("data-v-da06e69c");(0,o.pushScopeId)("data-v-da06e69c");const i={key:1,class:"twitter",ref:"twitter"},l={key:2,class:"mk-url-preview"},r={key:0,class:"expandTweet"};(0,o.popScopeId)();const d=n(((e,t,a,d,c,s)=>{const p=(0,o.resolveComponent)("Fa"),m=(0,o.resolveDirective)("size");return e.playerEnabled?((0,o.openBlock)(),(0,o.createBlock)("div",{key:0,class:"player",style:`padding: ${(e.player.height||0)/(e.player.width||1)*100}% 0 0`},[(0,o.createVNode)("button",{class:"disablePlayer",onClick:t[1]||(t[1]=t=>e.playerEnabled=!1),title:e.$ts.disablePlayer},[(0,o.createVNode)(p,{icon:"times"})],8,["title"]),(0,o.createVNode)("iframe",{src:e.player.url+(e.player.url.match(/\?/)?"&autoplay=1&auto_play=1":"?autoplay=1&auto_play=1"),width:e.player.width||"100%",heigth:e.player.height||250,frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,["src","width","heigth"])],4)):e.tweetId&&e.tweetExpanded?((0,o.openBlock)(),(0,o.createBlock)("div",i,[(0,o.createVNode)("iframe",{ref:"tweet",scrolling:"no",frameborder:"no",style:{position:"relative",left:e.tweetLeft+"px",width:""+(e.tweetLeft<0?"auto":"100%"),height:e.tweetHeight+"px"},src:`https://platform.twitter.com/embed/index.html?embedId=${e.embedId}&hideCard=false&hideThread=false&lang=en&theme=${e.$store.state.darkMode?"dark":"light"}&id=${e.tweetId}`},null,12,["src"])],512)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)("div",l,[(0,o.createVNode)(o.Transition,{name:"zoom",mode:"out-in"},{default:n((()=>[e.fetching?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.self?"MkA":"a"),{key:0,class:{compact:e.compact},[e.attr||""]:e.self?e.url.substr(e.local.length):e.url,rel:"nofollow noopener",target:e.target,title:e.url},{default:n((()=>[e.thumbnail?((0,o.openBlock)(),(0,o.createBlock)("div",{key:0,class:"thumbnail",style:`background-image: url('${e.thumbnail}')`},[!e.playerEnabled&&e.player.url?((0,o.openBlock)(),(0,o.createBlock)("button",{key:0,class:"_button",onClick:t[2]||(t[2]=(0,o.withModifiers)((t=>e.playerEnabled=!0),["prevent"])),title:e.$ts.enablePlayer},[(0,o.createVNode)(p,{icon:e.faPlayCircle},null,8,["icon"])],8,["title"])):(0,o.createCommentVNode)("",!0)],4)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)("article",null,[(0,o.createVNode)("header",null,[(0,o.createVNode)("h1",{title:e.title},(0,o.toDisplayString)(e.title),9,["title"])]),e.description?((0,o.openBlock)(),(0,o.createBlock)("p",{key:0,title:e.description},(0,o.toDisplayString)(e.description.length>85?e.description.slice(0,85)+"â€¦":e.description),9,["title"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)("footer",null,[e.icon?((0,o.openBlock)(),(0,o.createBlock)("img",{key:0,class:"icon",src:e.icon},null,8,["src"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)("p",{title:e.sitename},(0,o.toDisplayString)(e.sitename),9,["title"])])])])),_:1},16,["class","target","title"]))])),_:1}),e.tweetId?((0,o.openBlock)(),(0,o.createBlock)("div",r,[(0,o.createVNode)("a",{onClick:t[3]||(t[3]=t=>e.tweetExpanded=!0)},[(0,o.createVNode)(p,{icon:e.faTwitter},null,8,["icon"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$ts.expandTweet),1)])])):(0,o.createCommentVNode)("",!0)],512)),[[m,{max:[400,350]}]])}));var c=a(56024),s=a(51417),p=a(34862);const m=(0,o.defineComponent)({props:{url:{type:String,require:!0},detail:{type:Boolean,required:!1,default:!1},compact:{type:Boolean,required:!1,default:!1}},data(){const e=this.url.startsWith(p.HQ);return{local:p.HQ,fetching:!0,title:null,description:null,thumbnail:null,icon:null,sitename:null,player:{url:null,width:null,height:null},tweetId:null,tweetExpanded:this.detail,embedId:"embed"+Math.random().toString().replace(/\D/,""),tweetHeight:150,tweetLeft:0,playerEnabled:!1,self:e,attr:e?"to":"href",target:e?null:"_blank",faPlayCircle:c.aQ,faTwitter:s.mdU}},created(){const e=new URL(this.url);if("twitter.com"==e.hostname){const t=e.pathname.match(/^\/.+\/status(?:es)?\/(\d+)/);t&&(this.tweetId=t[1])}"music.youtube.com"===e.hostname&&e.pathname.match("^/(?:watch|channel)")&&(e.hostname="www.youtube.com");const t=(p.KQ||"ja-JP").replace("ja-KS","ja-JP");e.hash="",fetch(`https://summaly.arkjp.net/url?url=${encodeURIComponent(e.href)}&lang=${t}`).then((e=>{e.json().then((e=>{null!=e.url&&(this.title=e.title,this.description=e.description,this.thumbnail=e.thumbnail,this.icon=e.icon,this.sitename=e.sitename,this.fetching=!1,this.player=e.player)}))})),window.addEventListener("message",this.adjustTweetHeight)},mounted(){var e;const t=null===(e=this.$el)||void 0===e?void 0:e.clientWidth;t&&t<300&&(this.tweetLeft=t-241)},methods:{adjustTweetHeight(e){var t,a;if("https://platform.twitter.com"!==e.origin)return;const o=null===(t=e.data)||void 0===t?void 0:t["twttr.embed"];if("twttr.private.resize"!==(null==o?void 0:o.method))return;if((null==o?void 0:o.id)!==this.embedId)return;const n=null===(a=null==o?void 0:o.params[0])||void 0===a?void 0:a.height;n&&(this.tweetHeight=n)}},beforeUnmount(){window.removeEventListener("message",this.adjustTweetHeight)}});a(41756);m.render=d,m.__scopeId="data-v-da06e69c";const h=m},18635:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var o=a(55393);const n=(0,o.withScopeId)("data-v-6b6af731");(0,o.pushScopeId)("data-v-6b6af731");const i={class:"content"},l=(0,o.createVNode)("img",{src:"/assets/remove.png",alt:"Delete"},null,-1),r={key:1,class:"content"},d={key:1,class:"file"},c={key:1},s={key:2,class:"content"},p={class:"is-deleted"},m=(0,o.createVNode)("div",null,null,-1),h={key:0,class:"read"},u={key:0,class:"read"};(0,o.popScopeId)();const v=n(((e,t,a,n,v,b)=>{const w=(0,o.resolveComponent)("MkAvatar"),g=(0,o.resolveComponent)("Mfm"),f=(0,o.resolveComponent)("MkUrlPreview"),x=(0,o.resolveComponent)("MkTime"),k=(0,o.resolveComponent)("Fa"),y=(0,o.resolveDirective)("size");return(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)("div",{class:["thvuemwp",{isMe:e.isMe}]},[(0,o.createVNode)(w,{class:"avatar",user:e.message.user},null,8,["user"]),(0,o.createVNode)("div",i,[(0,o.createVNode)("div",{class:["balloon",{noText:null==e.message.text}]},[e.isMe?((0,o.openBlock)(),(0,o.createBlock)("button",{key:0,class:"delete-button",title:e.$ts.delete,onClick:t[1]||(t[1]=(...t)=>e.del&&e.del(...t))},[l],8,["title"])):(0,o.createCommentVNode)("",!0),e.message.isDeleted?((0,o.openBlock)(),(0,o.createBlock)("div",s,[(0,o.createVNode)("p",p,(0,o.toDisplayString)(e.$ts.deleted),1)])):((0,o.openBlock)(),(0,o.createBlock)("div",r,[e.message.text?((0,o.openBlock)(),(0,o.createBlock)(g,{key:0,class:"text",ref:"text",text:e.message.text,i:e.$i},null,8,["text","i"])):(0,o.createCommentVNode)("",!0),e.message.file?((0,o.openBlock)(),(0,o.createBlock)("div",d,[(0,o.createVNode)("a",{href:e.message.file.url,rel:"noopener",target:"_blank",title:e.message.file.name},["image"==e.message.file.type.split("/")[0]?((0,o.openBlock)(),(0,o.createBlock)("img",{key:0,src:e.message.file.url,alt:e.message.file.name},null,8,["src","alt"])):((0,o.openBlock)(),(0,o.createBlock)("p",c,(0,o.toDisplayString)(e.message.file.name),1))],8,["href","title"])])):(0,o.createCommentVNode)("",!0)]))],2),m,((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.urls,(e=>((0,o.openBlock)(),(0,o.createBlock)(f,{url:e,key:e,style:{margin:"8px 0"}},null,8,["url"])))),128)),(0,o.createVNode)("footer",null,[e.isGroup?((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,{key:0},[e.message.reads.length>0?((0,o.openBlock)(),(0,o.createBlock)("span",h,(0,o.toDisplayString)(e.$ts.messageRead)+" "+(0,o.toDisplayString)(e.message.reads.length),1)):(0,o.createCommentVNode)("",!0)],64)):((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,{key:1},[e.isMe&&e.message.isRead?((0,o.openBlock)(),(0,o.createBlock)("span",u,(0,o.toDisplayString)(e.$ts.messageRead),1)):(0,o.createCommentVNode)("",!0)],64)),(0,o.createVNode)(x,{time:e.message.createdAt},null,8,["time"]),e.message.is_edited?((0,o.openBlock)(),(0,o.createBlock)(k,{key:2,icon:"pencil-alt"})):(0,o.createCommentVNode)("",!0)])])],2)),[[y,{max:[400,500]}]])}));var b=a(42984),w=a(25300),g=a(71010),f=a(10192);const x=(0,o.defineComponent)({components:{MkUrlPreview:g.default},props:{message:{required:!0},isGroup:{required:!1}},computed:{isMe(){return this.message.userId===this.$i.id},urls(){if(this.message.text){const e=(0,b.Q)(this.message.text);return(0,w.Tw)(e.filter((e=>("url"===e.node.type||"link"===e.node.type)&&e.node.props.url&&!e.node.props.silent)).map((e=>e.node.props.url)))}return[]}},methods:{del(){f.hi("messaging/messages/delete",{messageId:this.message.id})}}});a(24861);x.render=v,x.__scopeId="data-v-6b6af731";const k=x},41756:(e,t,a)=>{var o=a(78721);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("3bceb320",o,!0,{})},24861:(e,t,a)=>{var o=a(22290);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("2445004c",o,!0,{})}}]);