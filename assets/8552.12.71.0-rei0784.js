(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[8552],{79960:(e,t,o)=>{var n=o(23645)((function(e){return e[1]}));n.push([e.id,".mfcuwfyp>.empty[data-v-6fde599d]{margin:0;padding:16px;text-align:center;color:var(--fg)}.mfcuwfyp>.placeholder[data-v-6fde599d]{padding:32px;opacity:.3}",""]),e.exports=n},62960:(e,t,o)=>{var n=o(23645)((function(e){return e[1]}));n.push([e.id,".container-toggle-enter-active[data-v-1dbdaf33],.container-toggle-leave-active[data-v-1dbdaf33]{overflow-y:hidden;transition:opacity .5s,height .5s!important}.container-toggle-enter-from[data-v-1dbdaf33],.container-toggle-leave-to[data-v-1dbdaf33]{opacity:0}.ukygtjoj[data-v-1dbdaf33]{position:relative;overflow:hidden}.ukygtjoj.naked[data-v-1dbdaf33]{background:transparent!important;box-shadow:none!important}.ukygtjoj.scrollable[data-v-1dbdaf33]{display:flex;flex-direction:column}.ukygtjoj.scrollable>div[data-v-1dbdaf33]{overflow:auto}.ukygtjoj>header[data-v-1dbdaf33]{position:relative;color:var(--panelHeaderFg);background:var(--panelHeaderBg);box-shadow:0 1px 0 0 var(--panelHeaderDivider);z-index:2;line-height:1.4em}.ukygtjoj>header>.title[data-v-1dbdaf33]{margin:0;padding:12px 16px}.ukygtjoj>header>.title[data-v-1dbdaf33]> [data-icon]{margin-right:6px}.ukygtjoj>header>.title[data-v-1dbdaf33]:empty{display:none}.ukygtjoj>header>.sub[data-v-1dbdaf33]{position:absolute;z-index:2;top:0;right:0;height:100%}.ukygtjoj>header>.sub[data-v-1dbdaf33]> button{width:42px;height:100%}.ukygtjoj>div[data-v-1dbdaf33]> ._content{padding:24px}.ukygtjoj>div[data-v-1dbdaf33]> ._content+._content{border-top:1px solid var(--divider)}.ukygtjoj.max-width_380px>header>.title[data-v-1dbdaf33]{padding:8px 10px;font-size:.9em}.ukygtjoj.max-width_380px>div[data-v-1dbdaf33]> ._content{padding:16px}._forceContainerFull_ .ukygtjoj>header>.title[data-v-1dbdaf33]{padding:12px 16px!important}._forceContainerFull_.ukygtjoj>header>.title[data-v-1dbdaf33]{padding:12px 16px!important}",""]),e.exports=n},46397:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var n=o(55393),i=o(51084),a=o(10192);function d(e){return(0,n.defineComponent)({props:{widget:{type:Object,required:!1},settingCallback:{required:!1}},emits:["updateProps"],data(){return{props:this.widget?JSON.parse(JSON.stringify(this.widget.data)):{},save:(0,i.P)(3e3,(()=>{this.$emit("updateProps",this.props)}))}},computed:{id(){return this.widget?this.widget.id:null}},created(){this.mergeProps(),this.$watch("props",(()=>{this.mergeProps()}),{deep:!0}),this.settingCallback&&this.settingCallback(this.setting)},methods:{mergeProps(){if(e.props){const t=e.props();for(const e of Object.keys(t))this.props.hasOwnProperty(e)||(this.props[e]=t[e].default)}},async setting(){const t=e.props();for(const e of Object.keys(t))t[e].default=this.props[e];const{canceled:o,result:n}=await a.cr(e.name,t);if(!o){for(const e of Object.keys(n))this.props[e]=n[e];this.save()}}}})}},8035:(e,t,o)=>{"use strict";o.d(t,{mv:()=>n});const n=["follow","mention","reply","renote","quote","reaction","pollVote","receiveFollowRequest","followRequestAccepted","groupInvited","app"]},17553:(e,t,o)=>{"use strict";o.d(t,{Z:()=>g});var n=o(55393);const i=(0,n.withScopeId)("data-v-6fde599d");(0,n.pushScopeId)("data-v-6fde599d");const a={class:"mfcuwfyp _noGap_"},d={key:0,class:"empty"};(0,n.popScopeId)();const s=i(((e,t,o,s,r,l)=>{const c=(0,n.resolveComponent)("XNote"),p=(0,n.resolveComponent)("XNotification"),h=(0,n.resolveComponent)("XList"),u=(0,n.resolveComponent)("MkLoading"),f=(0,n.resolveComponent)("MkError"),g=(0,n.resolveDirective)("appear");return(0,n.openBlock)(),(0,n.createBlock)("div",a,[(0,n.createVNode)(h,{class:"notifications",items:e.items},{default:i((({item:t})=>[["reply","quote","mention"].includes(t.type)?((0,n.openBlock)(),(0,n.createBlock)(c,{note:t.note,"onUpdate:note":o=>e.noteUpdated(t.note,o),key:t.id},null,8,["note","onUpdate:note"])):((0,n.openBlock)(),(0,n.createBlock)(p,{notification:t,"with-time":!0,full:!0,class:"_panel notification",key:t.id},null,8,["notification"]))])),_:1},8,["items"]),(0,n.withDirectives)((0,n.createVNode)("button",{class:"_buttonPrimary",onClick:t[1]||(t[1]=(...t)=>e.fetchMore&&e.fetchMore(...t)),disabled:e.moreFetching,style:{cursor:e.moreFetching?"wait":"pointer"}},[e.moreFetching?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.loadMore),1)],64)),e.moreFetching?((0,n.openBlock)(),(0,n.createBlock)(u,{key:1,inline:""})):(0,n.createCommentVNode)("",!0)],12,["disabled"]),[[g,e.$store.state.enableInfiniteScroll?e.fetchMore:null],[n.vShow,e.more]]),e.empty?((0,n.openBlock)(),(0,n.createBlock)("p",d,(0,n.toDisplayString)(e.$ts.noNotifications),1)):(0,n.createCommentVNode)("",!0),e.error?((0,n.openBlock)(),(0,n.createBlock)(f,{key:1,onRetry:t[2]||(t[2]=t=>e.init())})):(0,n.createCommentVNode)("",!0)])}));var r=o(90381),l=o(47577),c=o(8914),p=o(64099),h=o(8035),u=o(10192);const f=(0,n.defineComponent)({components:{XNotification:l.Z,XList:c.Z,XNote:p.Z},mixins:[(0,r.Z)({})],props:{includeTypes:{type:Array,required:!1,default:null}},data(){return{connection:null,pagination:{endpoint:"i/notifications",limit:10,params:()=>({includeTypes:this.allIncludeTypes||void 0})}}},computed:{allIncludeTypes(){var e;return null!==(e=this.includeTypes)&&void 0!==e?e:h.mv.filter((e=>!this.$i.mutingNotificationTypes.includes(e)))}},watch:{includeTypes:{handler(){this.reload()},deep:!0},"$i.mutingNotificationTypes":{handler(){null===this.includeTypes&&this.reload()},deep:!0}},mounted(){this.connection=u.Vw.useSharedConnection("main"),this.connection.on("notification",this.onNotification)},beforeUnmount(){this.connection.dispose()},methods:{onNotification(e){const t=!this.allIncludeTypes.includes(e.type);(t||"visible"===document.visibilityState)&&u.Vw.send("readNotification",{id:e.id}),t||this.prepend(Object.assign(Object.assign({},e),{isRead:"visible"===document.visibilityState}))},noteUpdated(e,t){const o=this.items.findIndex((t=>t.note===e));this.items[o]=Object.assign(Object.assign({},this.items[o]),{note:t})}}});o(2797);f.render=s,f.__scopeId="data-v-6fde599d";const g=f},69146:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var n=o(55393);const i=(0,n.withScopeId)("data-v-1dbdaf33");(0,n.pushScopeId)("data-v-1dbdaf33");const a={key:0,ref:"header"},d={class:"title"},s={class:"sub"};(0,n.popScopeId)();const r=i(((e,t,o,r,l,c)=>{const p=(0,n.resolveComponent)("Fa"),h=(0,n.resolveDirective)("size");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)("div",{class:["ukygtjoj _panel",{naked:e.naked,hideHeader:!e.showHeader,scrollable:e.scrollable,closed:!e.showBody}]},[e.showHeader?((0,n.openBlock)(),(0,n.createBlock)("header",a,[(0,n.createVNode)("div",d,[(0,n.renderSlot)(e.$slots,"header")]),(0,n.createVNode)("div",s,[(0,n.renderSlot)(e.$slots,"func"),e.bodyTogglable?((0,n.openBlock)(),(0,n.createBlock)("button",{key:0,class:"_button",onClick:t[1]||(t[1]=()=>e.showBody=!e.showBody)},[e.showBody?((0,n.openBlock)(),(0,n.createBlock)(p,{key:0,icon:e.faAngleUp},null,8,["icon"])):((0,n.openBlock)(),(0,n.createBlock)(p,{key:1,icon:e.faAngleDown},null,8,["icon"]))])):(0,n.createCommentVNode)("",!0)])],512)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(n.Transition,{name:"container-toggle",onEnter:e.enter,onAfterEnter:e.afterEnter,onLeave:e.leave,onAfterLeave:e.afterLeave},{default:i((()=>[(0,n.withDirectives)((0,n.createVNode)("div",null,[(0,n.renderSlot)(e.$slots,"default")],512),[[n.vShow,e.showBody]])])),_:3},8,["onEnter","onAfterEnter","onLeave","onAfterLeave"])],2)),[[h,{max:[380]}]])}));var l=o(51436);const c=(0,n.defineComponent)({props:{showHeader:{type:Boolean,required:!1,default:!0},naked:{type:Boolean,required:!1,default:!1},bodyTogglable:{type:Boolean,required:!1,default:!1},expanded:{type:Boolean,required:!1,default:!0},scrollable:{type:Boolean,required:!1,default:!1}},data(){return{showBody:this.expanded,faAngleUp:l.onQ,faAngleDown:l.gc2}},mounted(){this.$watch("showBody",(e=>{const t=this.showHeader?this.$refs.header.offsetHeight:0;this.$el.style.minHeight=t+"px",this.$el.style.flexBasis=e?"auto":t+"px"}),{immediate:!0})},methods:{toggleContent(e){this.bodyTogglable&&(this.showBody=e)},enter(e){const t=e.getBoundingClientRect().height;e.style.height=0,e.offsetHeight,e.style.height=t+"px"},afterEnter(e){e.style.height=null},leave(e){const t=e.getBoundingClientRect().height;e.style.height=t+"px",e.offsetHeight,e.style.height=0},afterLeave(e){e.style.height=null}}});o(64935);c.render=r,c.__scopeId="data-v-1dbdaf33";const p=c},58552:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(55393);var i=o(51436),a=o(69146),d=o(17553),s=o(46397),r=o(10192);const l=(0,s.Z)({name:"notifications",props:()=>({showHeader:{type:"boolean",default:!0},height:{type:"number",default:300},includingTypes:{type:"array",hidden:!0,default:null}})}),c=(0,n.defineComponent)({extends:l,components:{MkContainer:a.Z,XNotifications:d.Z},data:()=>({faBell:i.qmU,faCog:i.b7W}),methods:{configure(){r.gk(o.e(2320).then(o.bind(o,62320)),{includingTypes:this.props.includingTypes},{done:async e=>{const{includingTypes:t}=e;this.props.includingTypes=t,this.save()}},"closed")}}});c.render=function(e,t,o,i,a,d){const s=(0,n.resolveComponent)("Fa"),r=(0,n.resolveComponent)("XNotifications"),l=(0,n.resolveComponent)("MkContainer");return(0,n.openBlock)(),(0,n.createBlock)(l,{style:`height: ${e.props.height}px;`,"show-header":e.props.showHeader,scrollable:!0},{header:(0,n.withCtx)((()=>[(0,n.createVNode)(s,{icon:e.faBell},null,8,["icon"]),(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.notifications),1)])),func:(0,n.withCtx)((()=>[(0,n.createVNode)("button",{onClick:t[1]||(t[1]=t=>e.configure()),class:"_button"},[(0,n.createVNode)(s,{icon:e.faCog},null,8,["icon"])])])),default:(0,n.withCtx)((()=>[(0,n.createVNode)("div",null,[(0,n.createVNode)(r,{"include-types":e.props.includingTypes},null,8,["include-types"])])])),_:1},8,["style","show-header"])};const p=c},2797:(e,t,o)=>{var n=o(79960);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("ccf24ffc",n,!0,{})},64935:(e,t,o)=>{var n=o(62960);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("ab0d80cc",n,!0,{})}}]);