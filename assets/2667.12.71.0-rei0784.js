(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[2667,1223,1004],{99874:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".zdjebgpv[data-v-6ec0e189]{position:relative}.zdjebgpv>.icon-sub[data-v-6ec0e189]{position:absolute;width:30%;height:auto;margin:0;right:4%;bottom:4%}.zdjebgpv>*[data-v-6ec0e189]{margin:auto}.zdjebgpv>.icon[data-v-6ec0e189]{pointer-events:none;height:65%;width:65%}",""]),e.exports=a},83905:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".oyyftmcf>.preview[data-v-2dee9042]{height:150px}",""]),e.exports=a},3260:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".cpjygsrt[data-v-e916a71a]{position:relative;overflow:hidden;background:var(--panel);border:2px solid var(--X12);border-radius:6px}.cpjygsrt[data-v-e916a71a]:hover{border:2px solid var(--X13)}.cpjygsrt.warn[data-v-e916a71a]{border:2px solid #dec44c}.cpjygsrt.error[data-v-e916a71a]{border:2px solid red}.cpjygsrt+.cpjygsrt[data-v-e916a71a]{margin-top:16px}.cpjygsrt>header>.title[data-v-e916a71a]{z-index:1;margin:0;padding:0 16px;line-height:42px;font-size:.9em;font-weight:700;box-shadow:0 1px rgba(0,0,0,.07)}.cpjygsrt>header>.title>[data-icon][data-v-e916a71a]{margin-right:6px}.cpjygsrt>header>.title[data-v-e916a71a]:empty{display:none}.cpjygsrt>header>.buttons[data-v-e916a71a]{position:absolute;z-index:2;top:0;right:0}.cpjygsrt>header>.buttons>button[data-v-e916a71a]{padding:0;width:42px;font-size:.9em;line-height:42px}.cpjygsrt>header>.buttons .drag-handle[data-v-e916a71a]{cursor:move}.cpjygsrt>.warn[data-v-e916a71a]{color:#b19e49;margin:0;padding:16px 16px 0;font-size:14px}.cpjygsrt>.error[data-v-e916a71a]{color:red;margin:0;padding:16px 16px 0;font-size:14px}.cpjygsrt>.body[data-v-e916a71a] .eiipwacr:not(.inline):first-child,.cpjygsrt>.body[data-v-e916a71a] .juejbjww:not(.inline):first-child{margin-top:28px}.cpjygsrt>.body[data-v-e916a71a] .eiipwacr:not(.inline):last-child,.cpjygsrt>.body[data-v-e916a71a] .juejbjww:not(.inline):last-child{margin-bottom:20px}",""]),e.exports=a},797:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var a=o(55393);const i=(0,a.withScopeId)("data-v-6ec0e189");(0,a.pushScopeId)("data-v-6ec0e189");const l={class:"zdjebgpv",ref:"thumbnail"};(0,a.popScopeId)();const n=i(((e,t,o,i,n,c)=>{const r=(0,a.resolveComponent)("ImgWithBlurhash"),s=(0,a.resolveComponent)("Fa");return(0,a.openBlock)(),(0,a.createBlock)("div",l,[e.isThumbnailAvailable?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,hash:e.file.blurhash,src:e.file.thumbnailUrl,alt:e.file.name,title:e.file.name,style:"object-fit: "+e.fit},null,8,["hash","src","alt","title","style"])):"image"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,icon:e.faFileImage,class:"icon"},null,8,["icon"])):"video"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,icon:e.faFileVideo,class:"icon"},null,8,["icon"])):"audio"===e.is||"midi"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:3,icon:e.faMusic,class:"icon"},null,8,["icon"])):"csv"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:4,icon:e.faFileCsv,class:"icon"},null,8,["icon"])):"pdf"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:5,icon:e.faFilePdf,class:"icon"},null,8,["icon"])):"textfile"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:6,icon:e.faFileAlt,class:"icon"},null,8,["icon"])):"archive"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:7,icon:e.faFileArchive,class:"icon"},null,8,["icon"])):((0,a.openBlock)(),(0,a.createBlock)(s,{key:8,icon:e.faFile,class:"icon"},null,8,["icon"])),e.isThumbnailAvailable&&"video"===e.is?((0,a.openBlock)(),(0,a.createBlock)(s,{key:9,icon:e.faFilm,class:"icon-sub"},null,8,["icon"])):(0,a.createCommentVNode)("",!0)],512)}));var c=o(51436),r=o(27718),s=o(73120);const d=(0,a.defineComponent)({components:{ImgWithBlurhash:r.Z},props:{file:{type:Object,required:!0},fit:{type:String,required:!1,default:"cover"}},data:()=>({isContextmenuShowing:!1,isDragging:!1,faFile:c.gMD,faFileAlt:c.cwv,faFileImage:c.Oi0,faMusic:c.Xig,faFileVideo:c.hvm,faFileCsv:c.fUD,faFilePdf:c.gSj,faFileArchive:c.W2U,faFilm:c.CjD}),computed:{is(){return this.file.type.startsWith("image/")?"image":this.file.type.startsWith("video/")?"video":"audio/midi"===this.file.type?"midi":this.file.type.startsWith("audio/")?"audio":this.file.type.endsWith("/csv")?"csv":this.file.type.endsWith("/pdf")?"pdf":this.file.type.startsWith("text/")?"textfile":["application/zip","application/x-cpio","application/x-bzip","application/x-bzip2","application/java-archive","application/x-rar-compressed","application/x-tar","application/gzip","application/x-7z-compressed"].some((e=>e===this.file.type))?"archive":"unknown"},isThumbnailAvailable(){return!!this.file.thumbnailUrl&&("image"===this.is||"video"===this.is)}},mounted(){const e=this.$refs.volumectrl;e&&(e.volume=s.cP.get("mediaVolume"))},methods:{volumechange(){const e=this.$refs.volumectrl;s.cP.set("mediaVolume",e.volume)}}});o(21969);d.render=n,d.__scopeId="data-v-6ec0e189";const p=d},52667:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var a=o(55393);const i=(0,a.withScopeId)("data-v-2dee9042");(0,a.pushScopeId)("data-v-2dee9042");const l={class:"oyyftmcf"};(0,a.popScopeId)();const n=i(((e,t,o,n,c,r)=>{const s=(0,a.resolveComponent)("Fa"),d=(0,a.resolveComponent)("MkDriveFileThumbnail"),p=(0,a.resolveComponent)("XContainer");return(0,a.openBlock)(),(0,a.createBlock)(p,{onRemove:t[3]||(t[3]=()=>e.$emit("remove")),draggable:!0},{header:i((()=>[(0,a.createVNode)(s,{icon:e.faImage},null,8,["icon"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$ts._pages.blocks.image),1)])),func:i((()=>[(0,a.createVNode)("button",{onClick:t[1]||(t[1]=t=>e.choose())},[(0,a.createVNode)(s,{icon:e.faFolderOpen},null,8,["icon"])])])),default:i((()=>[(0,a.createVNode)("section",l,[e.file?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"preview",file:e.file,fit:"contain",onClick:t[2]||(t[2]=t=>e.choose())},null,8,["file"])):(0,a.createCommentVNode)("",!0)])])),_:1})}));var c=o(51436),r=o(56024),s=o(1223),d=o(797),p=o(10192);const h=(0,a.defineComponent)({components:{XContainer:s.default,MkDriveFileThumbnail:d.Z},props:{value:{required:!0}},data:()=>({file:null,faPencilAlt:c.UJf,faImage:r.Vm,faFolderOpen:r.cC}),created(){void 0===this.value.fileId&&(this.value.fileId=null)},mounted(){null==this.value.fileId?this.choose():p.hi("drive/files/show",{fileId:this.value.fileId}).then((e=>{this.file=e}))},methods:{async choose(){p.sg(!1).then((e=>{this.file=e,this.value.fileId=e.id}))}}});o(59868);h.render=n,h.__scopeId="data-v-2dee9042";const u=h},1223:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var a=o(55393);const i=(0,a.withScopeId)("data-v-e916a71a");(0,a.pushScopeId)("data-v-e916a71a");const l={class:"title"},n={class:"buttons"},c={key:1,class:"drag-handle _button"},r={class:"body"};(0,a.popScopeId)();const s=i(((e,t,o,i,s,d)=>{const p=(0,a.resolveComponent)("Fa");return(0,a.openBlock)(),(0,a.createBlock)("div",{class:["cpjygsrt",{error:null!=e.error,warn:null!=e.warn}]},[(0,a.createVNode)("header",null,[(0,a.createVNode)("div",l,[(0,a.renderSlot)(e.$slots,"header")]),(0,a.createVNode)("div",n,[(0,a.renderSlot)(e.$slots,"func"),e.removable?((0,a.openBlock)(),(0,a.createBlock)("button",{key:0,onClick:t[1]||(t[1]=t=>e.remove()),class:"_button"},[(0,a.createVNode)(p,{icon:e.faTrashAlt},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),e.draggable?((0,a.openBlock)(),(0,a.createBlock)("button",c,[(0,a.createVNode)(p,{icon:e.faBars},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("button",{onClick:t[2]||(t[2]=t=>e.toggleContent(!e.showBody)),class:"_button"},[e.showBody?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,icon:e.faAngleUp},null,8,["icon"])):((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,icon:e.faAngleDown},null,8,["icon"]))])])]),null!=e.error?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("p",{key:0,class:"error"},(0,a.toDisplayString)(e.$t("_pages.script.typeError",{slot:e.error.arg+1,expect:e.$t("script.types."+e.error.expect),actual:e.$t("script.types."+e.error.actual)})),513)),[[a.vShow,e.showBody]]):(0,a.createCommentVNode)("",!0),null!=e.warn?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("p",{key:1,class:"warn"},(0,a.toDisplayString)(e.$t("_pages.script.thereIsEmptySlot",{slot:e.warn.slot+1})),513)),[[a.vShow,e.showBody]]):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createVNode)("div",r,[(0,a.renderSlot)(e.$slots,"default")],512),[[a.vShow,e.showBody]])],2)}));var d=o(51436),p=o(56024);const h=(0,a.defineComponent)({props:{expanded:{type:Boolean,default:!0},removable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},error:{required:!1,default:null},warn:{required:!1,default:null}},emits:["toggle","remove"],data(){return{showBody:this.expanded,faTrashAlt:p.I7,faBars:d.xiG,faAngleUp:d.onQ,faAngleDown:d.gc2}},methods:{toggleContent(e){this.showBody=e,this.$emit("toggle",e)},remove(){this.$emit("remove")}}});o(58399);h.render=s,h.__scopeId="data-v-e916a71a";const u=h},21969:(e,t,o)=>{var a=o(99874);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("907f8486",a,!0,{})},59868:(e,t,o)=>{var a=o(83905);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("308f6578",a,!0,{})},58399:(e,t,o)=>{var a=o(3260);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("b22b7fbc",a,!0,{})}}]);